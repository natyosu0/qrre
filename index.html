<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>QR読み取り</title>
<script src="https://unpkg.com/html5-qrcode"></script>

<style>
body {
text-align: center;
}
#codeBox {
margin-top: 10px;
font-size: 18px;
font-weight: bold;
#reader {
width: 320px;
height: 320px;
margin-top: 20px;
}  
</style>
</head>
<body>

<h3>QRコード読み取り</h3>

<div id="codebox">  
  製品番号：<span id="code"></span>
</div>

<button id="startBtn">カメラ起動</button>

<div id="reader"></div>

<script>
var qr = null;

document.getElementById("startBtn").onclick = function () {

if (qr !== null) {
return;
}

qr = new Html5Qrcode("reader");

qr.start(
{ facingMode: "environment" }, // 背面カメラ
{
fps: 10,
qrbox: 250
},
function (decodedText) {
document.getElementById("code").innerText = decodedText;
},
function (errorMessage) {
// 読み取り失敗時（無視でOK）
}
).catch(function (err) {
alert("カメラを起動できません: " + err);
});
};
</script>

</body>
</html>
